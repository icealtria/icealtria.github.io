<!DOCTYPE html><html lang="zh-cn"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.1.1"><!-- Canonical URL --><link rel="canonical" href="https://icealtria.github.io/blog/cloud-jellyfin/"><!-- Primary Meta Tags --><title>折腾日记：尝试将影片库到云端</title><meta name="title" content="折腾日记：尝试将影片库到云端"><meta name="description" content="简单的说下我迁移影片到云端的过程，还有坑。使用的是 alist 和天翼盘。"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://icealtria.github.io/blog/cloud-jellyfin/"><meta property="og:title" content="折腾日记：尝试将影片库到云端"><meta property="og:description" content="简单的说下我迁移影片到云端的过程，还有坑。使用的是 alist 和天翼盘。"><meta property="og:image" content="https://icealtria.github.io/assets/jellyfin.webp"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://icealtria.github.io/blog/cloud-jellyfin/"><meta property="twitter:title" content="折腾日记：尝试将影片库到云端"><meta property="twitter:description" content="简单的说下我迁移影片到云端的过程，还有坑。使用的是 alist 和天翼盘。"><meta property="twitter:image" content="https://icealtria.github.io/assets/jellyfin.webp"><link rel="stylesheet" href="/assets/about.css">
<link rel="stylesheet" href="/assets/about-1.css">
<style>[data-astro-image]{aspect-ratio:var(--w) /var(--h);height:auto;-o-object-fit:var(--fit);object-fit:var(--fit);-o-object-position:var(--pos);object-position:var(--pos);width:100%}[data-astro-image=responsive]{max-height:calc(var(--h)*1px);max-width:calc(var(--w)*1px)}[data-astro-image=fixed]{height:calc(var(--h)*1px);width:calc(var(--w)*1px)}
</style></head> <body class="bg-background"> <header> <img class="header-img" height="112" width="540" draggable="false" src="/header.svg" alt="header"> <nav> <div class="flex justify-center my-4"> <a href="/" class="header-link flex items-center gap-1"> <svg width="1em" height="1em" data-icon="ic:baseline-home">   <symbol id="ai:ic:baseline-home" viewBox="0 0 24 24"><path fill="currentColor" d="M10 20v-6h4v6h5v-8h3L12 3L2 12h3v8z"/></symbol><use href="#ai:ic:baseline-home"></use>  </svg>首页 </a> <a href="/blog/" class="header-link flex items-center gap-1"> <svg width="1em" height="1em" data-icon="ic:baseline-archive">   <symbol id="ai:ic:baseline-archive" viewBox="0 0 24 24"><path fill="currentColor" d="m20.54 5.23l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27M12 17.5L6.5 12H10v-2h4v2h3.5zM5.12 5l.81-1h12l.94 1z"/></symbol><use href="#ai:ic:baseline-archive"></use>  </svg> 归档 </a> <a href="/friends/" class="header-link flex items-center gap-1">  <svg width="1em" height="1em" data-icon="ic:baseline-contacts">   <symbol id="ai:ic:baseline-contacts" viewBox="0 0 24 24"><path fill="currentColor" d="M20 0H4v2h16zM4 24h16v-2H4zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m-8 2.75c1.24 0 2.25 1.01 2.25 2.25s-1.01 2.25-2.25 2.25S9.75 10.24 9.75 9S10.76 6.75 12 6.75M17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5z"/></symbol><use href="#ai:ic:baseline-contacts"></use>  </svg>友链
 </a> <a href="/about/" class="header-link flex items-center gap-1"> <svg width="1em" height="1em" data-icon="ic:baseline-info">   <symbol id="ai:ic:baseline-info" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"/></symbol><use href="#ai:ic:baseline-info"></use>  </svg>关于 </a> </div> </nav> </header> <div class="mx-auto px-4">  <main class="max-w-4xl mx-auto rounded-2xl"> <img src="/assets/jellyfin_9jgvT.avif" alt="img of 折腾日记：尝试将影片库到云端" loading="eager" style="--i: hcloud-jellyfin" width="1000" height="563" decoding="async" class="hero-image"> <article> <div> <div style="view-transition-name: tcloud-jellyfin"> <h1 class="mb-0">折腾日记：尝试将影片库到云端</h1> <div class="text-sm font-light mt-4"> <time datetime="2023-02-13T00:00:00.000Z"> 2023. 2. 13. </time> </div> </div> <div class="tags"><a class="tag" href="/tags/折腾">
#折腾</a><a class="tag" href="/tags/NAS">
#NAS</a></div> </div> <div class="slide-up"> <p>最近，我偶然发现了一个名为 alist 的项目，它能挂载多款国内的网盘，并支持 WebDav 协议。然后我想到了祖传的 10T 天翼网盘。于是，我产生了一个令人兴奋的想法：将 NAS 中的影片移动到网盘上，并使用 webdav 协议在 kodi 中进行播放。在这篇文章中，我将记录下我如何实现这个想法和坑。</p>
<h2 id="准备工作"><a aria-hidden="true" tabindex="-1" href="#准备工作"><span class="icon icon-link"></span></a>准备工作</h2>
<p>首先，我们需要安装 Alist。这是一个非常简单的过程，只需遵循安装说明并进行操作即可。作为安装的方法，我选择了使用 docker compose 进行安装。</p>
<p>天翼网盘免费版一天只有 2G 上传，想要更大的上传只能购买会员。电信用户可以到积分商城兑换，1000 积分一个月。</p>
<p>在登录管理面板后，我们需要添加网盘。alist 支持天翼网盘和天翼网盘客户端。对于大于 4 GB 的文件，必须使用天翼网盘客户端。</p>
<h2 id="迁移工作"><a aria-hidden="true" tabindex="-1" href="#迁移工作"><span class="icon icon-link"></span></a>迁移工作</h2>
<p>既然 alist 支持 WebDav 了，我决定选择使用 rclone 进行文件迁移。sync 命令比通过网页传输方便得多。此外，我还有一些影片尚未刮削元数据，使用 sync 命令可以将我在本地对影片的修改同步到远端。并且如果传输过程中出现问题，也容易处理。</p>
<h2 id="评估"><a aria-hidden="true" tabindex="-1" href="#评估"><span class="icon icon-link"></span></a>评估</h2>
<p>在使用 alist 把影片迁移到网盘后，我惊讶地发现它的播放效果非常流畅，即使是 16Mbps 的高码率视频，拖动播放进度条也能立即加载。这个体验相比许多在线流媒体服务都更出色。（会员过期后，拖动进度条缓冲时间大概为 1 秒）</p>
<p>然而，在搜索影片的元数据时，速度可能会有所不足，需要一些等待时间。我猜测这可能是由于文件数量过多，于是我决定删除部分每集的缩略图和不必要的海报以提升速度。然后，我遇到了以下原因不明的异常行为。</p>
<h2 id="坑"><a aria-hidden="true" tabindex="-1" href="#坑"><span class="icon icon-link"></span></a>坑</h2>
<p>我使用 rclone sync 命令，将我在 NAS 的删除操作同步到远端，但文件只被删除了一部分。命令执行的很快，执行过程中也没发生报错，到 alist 网页中看到文件被删除，但我到网盘页面看到只删除了一部分。接着我刷新 alist 的文件列表，果然还在，这个就很。。到时候再研究下怎么回事了。之前我上传文件的时候出现过几次错误，但之后重试后都顺利完成了（rclone sync 失败后会重新尝试 2 次）。</p>
<h2 id="总结"><a aria-hidden="true" tabindex="-1" href="#总结"><span class="icon icon-link"></span></a>总结</h2>
<p>总的来说，使用网盘作为影片库与 kodi 观看的体验很不错，但是天翼盘不付费的上传体验糟糕。迁移后 NAS 硬盘空间非常充裕，可以不用买新硬盘了。但 alist 通过 WebDav 进行某些操作文件时不是很稳定，除了视频播放。</p>
<h2 id="后记"><a aria-hidden="true" tabindex="-1" href="#后记"><span class="icon icon-link"></span></a>后记</h2>
<p>之后换了 Rclone + Jellyfin，Kodi 每次要等打开电视才扫描片库。使用 rclone mount 将 WebDav 挂载到其中一个目录，然后添加到 Jellyfin，体验要远远好于 kodi。</p> </div> </article> <div class="mx-4 my-12 md:mx-8 md:py-2"> <div class="comment mx-auto text-center"> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="ZIyMBA" component-url="/_astro/Comment.C_Yv0Fm_.js" component-export="default" renderer-url="/_astro/client.svelte.DimEKXJb.js" props="{}" ssr client="load" opts="{&quot;name&quot;:&quot;Comment&quot;,&quot;value&quot;:true}" await-children><!--[--><!--[!--><button class="button-xl my-12">加载评论</button><!--]--><!--]--><!--astro:end--></astro-island> <noscript>Javascript is required</noscript> </div> </div> </main>  <footer id="footer" class="flex my-8 flex-col items-center"> <img class="h-20" src="https://meow-counter.icealtria.workers.dev/get/cloud-jellyfin" alt="meow counter"> <div class="gap-2 flex justify-center items-center">
Copyright &copy; 2025 <span>icealtria</span>|
<a href="/atom.xml">RSS</a> </div> </footer> </div> </body></html>